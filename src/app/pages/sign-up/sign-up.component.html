<div>
    <form [formGroup]="signupForm" (ngSubmit)="handleSignup()">
        <div class="form-group">
            <h2 data-angular="form-title">Sign Up</h2>
            <a 
                routerLink="/sign-in"
                data-angular="sign-in-link"
            >
                Already have an account?
            </a>
            <div *ngIf="errors.length">
                <div class="form-error" *ngFor="let error of errors">{{error}}</div>
            </div>
            <input
                type="text" 
                class="form-control" 
                id="username" 
                name="username"
                required
                formControlName="username"
                placeholder="Username"
            >
            <span 
                class="form-error" 
                *ngIf="!checkIfValid('username')"
                data-angular="form-error"
            >
                This field is required
            </span>
            <input 
                type="text" 
                class="form-control" 
                id="email" 
                name="email" 
                required 
                formControlName="email"
                placeholder="Email"
            >
            <span 
                class="form-error" 
                *ngIf="!checkIfValid('email') && !signupForm.get('email')?.value"
                data-angular="form-error"
            >
                This field is required
            </span>
            <span 
                class="form-error" 
                *ngIf="signupForm.get('email')?.errors?.['email']"
                data-angular="form-error"
            >
                Enter a valid email
            </span>
            <input 
                type="password" 
                class="form-control" 
                id="password" 
                name="password" 
                required
                formControlName="password" 
                placeholder="Password"
            >
            <span 
                class="form-error" 
                *ngIf="!checkIfValid('password')"
                data-angular="form-error"
            >
                Password must be at least 6 characters long
            </span>
            <button 
                [disabled]="!signupForm.valid || isPending"
                align="end"
                type="submit"
                mat-raised-button
                color="primary"
                data-angular="sign-up-button"
            >
                <span *ngIf="!isPending">Sign Up</span>
                <mat-spinner *ngIf="isPending" diameter="30"></mat-spinner>
            </button>
        </div>
    </form>
</div>

