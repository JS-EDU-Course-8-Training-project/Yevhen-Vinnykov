<div class="container">
  <mat-card class="background-card">
    <form [formGroup]="signUpForm" (ngSubmit)="handleSignUp()" #form="ngForm">
      <div class="form-group">
        <h2 [e2e]="TestAttributes.FormTitle">Sign Up</h2>
        <a routerLink="/sign-in" [e2e]="TestAttributes.SignInLink">
          Already have an account?
        </a>
        <div *ngIf="error" class="form-error" [e2e]="TestAttributes.FormError">
          {{ error }}
        </div>
        <input
          type="text"
          class="form-control"
          id="username"
          name="username"
          required
          formControlName="username"
          placeholder="Username"
          [e2e]="TestAttributes.UsernameInput"
        />
        <span
          class="form-error"
          *ngIf="
            !signUpForm.controls['username'].value.length &&
            (signUpForm.controls['username'].touched || form.submitted)
          "
          [e2e]="TestAttributes.FormError"
        >
          This field is required
        </span>
        <input
          type="text"
          class="form-control"
          id="email"
          name="email"
          required
          formControlName="email"
          placeholder="Email"
          [e2e]="TestAttributes.EmailInput"
        />
        <span
          class="form-error"
          *ngIf="
            (signUpForm.controls['email'].dirty ||
              signUpForm.controls['email'].touched ||
              form.submitted) &&
            signUpForm.controls['email'].invalid
          "
          [e2e]="TestAttributes.FormError"
        >
          Enter a valid email
        </span>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          required
          formControlName="password"
          placeholder="Password"
          [e2e]="TestAttributes.PasswordInput"
        />
        <span
          class="form-error"
          *ngIf="
            (signUpForm.controls['password'].dirty ||
              signUpForm.controls['password'].touched ||
              form.submitted) &&
            signUpForm.controls['password'].invalid
          "
          [e2e]="TestAttributes.FormError"
        >
          Password must be at least 6 characters long, contain at least one
          capital letter and a digit
        </span>
        <button
          type="submit"
          mat-raised-button
          color="primary"
          [e2e]="TestAttributes.SignUpBtn"
        >
          Sign Up
        </button>
      </div>
      <mat-card-footer>
        <mat-progress-bar
          style="position: absolute; right: 3px; border-radius: 8px; width: 99%;"
          *ngIf="isLoading"
          mode="indeterminate"
        ></mat-progress-bar>
      </mat-card-footer>
    </form>
  </mat-card>
</div>
