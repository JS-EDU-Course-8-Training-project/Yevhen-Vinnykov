<div>
    <form [formGroup]="settingsForm" (ngSubmit)="updateSettings()">
        <div class="form-group">
            <div *ngIf="errors.length">
                <div class="form-error" *ngFor="let error of errors">{{error}}</div>
            </div>
            <input 
                type="text" 
                class="form-control" 
                id="image" 
                name="image" 
                required 
                formControlName="image"
                placeholder="User photo URL"
            >
            <input 
                type="text" 
                class="form-control" 
                id="username" 
                name="username" 
                required 
                formControlName="username"
                placeholder="Username"
            >
            <span 
                class="form-error" 
                *ngIf="!checkIfValid('username')"
                data-angular="form-error"
            >
                This field is required
            </span>
            <textarea 
                type="text" 
                class="form-control" 
                id="bio" 
                name="bio" 
                required 
                formControlName="bio"
                placeholder="Bio"
            >
            </textarea>
            <input 
                type="text" 
                class="form-control" 
                id="email" 
                name="email" 
                required 
                formControlName="email"
                placeholder="Email"
            >
            <span 
                class="form-error"
                *ngIf="!checkIfValid('email') && !settingsForm.get('email')?.value"
                data-angular="form-error"
             >
                This field is required
            </span>
            <span 
                class="form-error" 
                *ngIf="settingsForm.get('email')?.errors?.['email']"
                data-angular="form-error"
            >
                Enter a valid email
            </span>
            <input 
                type="password" 
                class="form-control" 
                id="password" 
                name="password" 
                required
                formControlName="password"  
                placeholder="New password"
            >
            <div class="form-group-actions">
                <button 
                    [disabled]="isPending" 
                    align="end" 
                    type="submit" 
                    mat-raised-button 
                    color="primary"
                    data-angular="test-update-button"
                >
                    <span *ngIf="!isPending">Update</span>
                    <mat-spinner *ngIf="isPending" diameter="30"></mat-spinner>
                </button>
                <button 
                    (click)="logout()" 
                    align="end" 
                    type="button" 
                    mat-raised-button 
                    color="warn"
                    data-angular="test-logout-button"
                >
                    Logout
                 </button>
            </div>
        </div>
    </form>
</div>
