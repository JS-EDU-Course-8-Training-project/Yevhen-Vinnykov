<div>
  <form [formGroup]="settingsForm" (ngSubmit)="updateSettings()">
    <mat-card class="card">
      <div class="form-group">
        <div *ngIf="error" class="form-error" [e2e]="TestAttributes.FormError">
          {{ error }}
        </div>
        <input
          type="text"
          class="form-control"
          id="image"
          name="image"
          required
          formControlName="image"
          placeholder="User photo URL"
          [e2e]="TestAttributes.ImageInput"
        />
        <input
          type="text"
          class="form-control"
          id="username"
          name="username"
          required
          formControlName="username"
          placeholder="Username"
          [e2e]="TestAttributes.UsernameInput"
        />
        <span
          class="form-error"
          *ngIf="!checkIfValid('username')"
          [e2e]="TestAttributes.FormError"
        >
          This field is required
        </span>
        <textarea
          type="text"
          class="form-control"
          id="bio"
          name="bio"
          required
          formControlName="bio"
          placeholder="Bio"
          [e2e]="TestAttributes.BioInput"
        >
        </textarea>
        <input
          type="text"
          class="form-control"
          id="email"
          name="email"
          required
          formControlName="email"
          placeholder="Email"
          [e2e]="TestAttributes.EmailInput"
        />
        <span
          class="form-error"
          *ngIf="!checkIfValid('email') && !settingsForm.get('email')?.value"
          [e2e]="TestAttributes.FormError"
        >
          This field is required
        </span>
        <span
          class="form-error"
          *ngIf="settingsForm.get('email')?.errors?.['email']"
          [e2e]="TestAttributes.FormError"
        >
          Enter a valid email
        </span>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          required
          formControlName="password"
          placeholder="New password"
          [e2e]="TestAttributes.PasswordInput"
        />
        <div class="form-group-actions">
          <button
            mat-flat-button
            color="primary"
            [disabled]="isPending"
            type="submit"
            [e2e]="TestAttributes.SettingsUpdateBtn"
          >
            Update
          </button>
          <button
            (click)="logout()"
            type="button"
            mat-stroked-button
            color="primary"
            [e2e]="TestAttributes.SettingsLogoutBtn"
          >
            Logout
          </button>
        </div>
      </div>
      <mat-card-footer>
        <mat-progress-bar
          *ngIf="isPending"
          mode="indeterminate"
        ></mat-progress-bar>
      </mat-card-footer>
    </mat-card>
  </form>
</div>
